<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>快推短视频 - 管理页面</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366F1',
                        secondary: '#8B5CF6',
                        danger: '#EF4444',
                        dark: '#1F2937',
                        light: '#F9FAFB'
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .gradient-bg {
                background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%);
            }
            .input-focus {
                @apply focus:ring-2 focus:ring-primary/50 focus:border-primary focus:outline-none;
            }
            .btn-primary {
                @apply bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1;
            }
            .btn-secondary {
                @apply bg-white border border-primary text-primary hover:bg-primary/5 font-medium py-2 px-4 rounded-lg transition-all duration-300;
            }
            .btn-danger {
                @apply bg-danger hover:bg-danger/90 text-white font-medium py-2 px-4 rounded-lg transition-all duration-300;
            }
            .card-hover {
                @apply transition-all duration-300 hover:shadow-xl hover:-translate-y-1;
            }
            .nav-active {
                @apply border-b-2 border-primary text-primary font-medium;
            }
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50 font-inter">
    <!-- 顶部导航栏 -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 text-primary">
                        <i class="fa fa-cog text-2xl"></i>
                    </div>
                    <div class="ml-3">
                        <h1 class="text-xl font-semibold text-dark">快推短视频 - 管理后台</h1>
                    </div>
                </div>
                
                <div class="hidden md:block">
                    <div class="ml-10 flex items-center space-x-4">
                        <a href="admin.html" class="nav-active px-3 py-2 text-sm">首页</a>
                        <a href="#" class="border-transparent hover:border-primary/30 hover:text-primary px-3 py-2 text-sm transition-colors">视频管理</a>
                        <a href="#" class="border-transparent hover:border-primary/30 hover:text-primary px-3 py-2 text-sm transition-colors">套餐管理</a>
                        <a href="#" class="border-transparent hover:border-primary/30 hover:text-primary px-3 py-2 text-sm transition-colors">用户管理</a>
                        <a href="#" class="border-transparent hover:border-primary/30 hover:text-primary px-3 py-2 text-sm transition-colors">消息管理</a>
                    </div>
                </div>
                
                <div class="flex items-center">
                    <button id="userMenuBtn" class="flex items-center">
                        <div class="h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center">
                            <i class="fa fa-user text-gray-500"></i>
                        </div>
                        <span class="ml-2 text-sm font-medium text-gray-700">管理员</span>
                        <i class="fa fa-angle-down ml-1 text-gray-500"></i>
                    </button>
                    
                    <div id="userMenu" class="hidden absolute right-4 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
                        <a href="#" id="logoutLink" class="block px-4 py-2 text-sm text-red-600 hover:bg-gray-100">
                            <i class="fa fa-sign-out mr-2"></i>退出登录
                        </a>
                    </div>
                </div>
                
                <div class="md:hidden">
                    <button id="mobileMenuBtn" class="text-gray-500 hover:text-primary">
                        <i class="fa fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- 移动端菜单 -->
        <div id="mobileMenu" class="hidden md:hidden bg-white border-t">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="admin.html" class="block px-3 py-2 rounded-md text-base font-medium text-primary bg-primary/10">首页</a>
                <a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100">视频管理</a>
                <a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100">套餐管理</a>
                <a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100">用户管理</a>
                <a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100">消息管理</a>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <!-- 欢迎信息 -->
        <div class="mb-10">
            <h1 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold gradient-bg bg-clip-text text-transparent mb-4">管理中心</h1>
            
            <!-- 数据概览 -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
                <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                    <div class="flex items-center">
                        <div class="h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center">
                            <i class="fa fa-users text-primary text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-gray-500 text-sm">注册用户</p>
                            <p class="text-2xl font-semibold text-dark">2</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                    <div class="flex items-center">
                        <div class="h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center">
                            <i class="fa fa-film text-primary text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-gray-500 text-sm">视频总数</p>
                            <p class="text-2xl font-semibold text-dark">25</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                    <div class="flex items-center">
                        <div class="h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center">
                            <i class="fa fa-comments text-primary text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-gray-500 text-sm">新消息</p>
                            <p class="text-2xl font-semibold text-dark">3</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 用户管理 -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden mb-10">
                <div class="p-6">
                    <h2 class="text-xl font-semibold text-dark mb-6">用户管理</h2>
                    
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">用户名</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">当前套餐</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">剩余视频</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">推推点数</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center mr-3">
                                                <i class="fa fa-user text-gray-500"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">robin</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">专业套餐</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        7/10
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <span id="robinPoints">150</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button onclick="openPointsModal('robin')" class="text-primary hover:text-primary/80 mr-3">管理点数</button>
                                        <button onclick="viewUserDetails('robin')" class="text-gray-600 hover:text-gray-900">查看详情</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center mr-3">
                                                <i class="fa fa-user text-gray-500"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">text</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">基础套餐</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        3/5
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <span id="textPoints">80</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button onclick="openPointsModal('text')" class="text-primary hover:text-primary/80 mr-3">管理点数</button>
                                        <button onclick="viewUserDetails('text')" class="text-gray-600 hover:text-gray-900">查看详情</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- 最新消息 -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden mb-10">
                <div class="p-6">
                    <h2 class="text-xl font-semibold text-dark mb-6">最新消息</h2>
                    
                    <div class="space-y-6">
                        <div class="border-l-4 border-primary pl-4 py-2">
                            <div class="flex justify-between items-start">
                                <h3 class="text-sm font-medium text-gray-900">robin</h3>
                                <p class="text-xs text-gray-500">2025-07-22 10:30</p>
                            </div>
                            <p class="mt-1 text-sm text-gray-700">请问什么时候会更新新的高级特效教程？</p>
                            <div class="mt-3">
                                <button onclick="replyMessage('robin', 1)" class="text-primary hover:text-primary/80 text-sm">回复</button>
                            </div>
                        </div>
                        
                        <div class="border-l-4 border-primary pl-4 py-2">
                            <div class="flex justify-between items-start">
                                <h3 class="text-sm font-medium text-gray-900">text</h3>
                                <p class="text-xs text-gray-500">2025-07-21 16:45</p>
                            </div>
                            <p class="mt-1 text-sm text-gray-700">基础套餐的视频数量能否增加一些？</p>
                            <div class="mt-3">
                                <button onclick="replyMessage('text', 2)" class="text-primary hover:text-primary/80 text-sm">回复</button>
                            </div>
                        </div>
                        
                        <div class="border-l-4 border-primary pl-4 py-2">
                            <div class="flex justify-between items-start">
                                <h3 class="text-sm font-medium text-gray-900">robin</h3>
                                <p class="text-xs text-gray-500">2025-07-20 09:15</p>
                            </div>
                            <p class="mt-1 text-sm text-gray-700">专业套餐的视频质量非常高，希望能推出更多类似的内容。</p>
                            <div class="mt-3">
                                <button onclick="replyMessage('robin', 3)" class="text-primary hover:text-primary/80 text-sm">回复</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-dark text-white py-10 mt-16">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">快推短视频</h3>
                    <p class="text-gray-400 text-sm">
                        提供高质量短视频教程和素材，帮助你快速提升短视频制作水平。
                    </p>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">快速链接</h3>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li><a href="#" class="hover:text-white transition-colors">首页</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">视频管理</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">套餐管理</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">用户管理</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">消息管理</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">联系我们</h3>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li class="flex items-center">
                            <i class="fa fa-envelope-o mr-2"></i>
                            <a href="mailto:support@kuaitui.com" class="hover:text-white transition-colors">support@kuaitui.com</a>
                        </li>
                        <li class="flex items-center">
                            <i class="fa fa-phone mr-2"></i>
                            <span>400-123-4567</span>
                        </li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">关注我们</h3>
                    <div class="flex space-x-4">
                        <a href="#" class="bg-gray-700 hover:bg-primary w-10 h-10 rounded-full flex items-center justify-center transition-colors">
                            <i class="fa fa-weixin"></i>
                        </a>
                        <a href="#" class="bg-gray-700 hover:bg-primary w-10 h-10 rounded-full flex items-center justify-center transition-colors">
                            <i class="fa fa-weibo"></i>
                        </a>
                        <a href="#" class="bg-gray-700 hover:bg-primary w-10 h-10 rounded-full flex items-center justify-center transition-colors">
                            <i class="fa fa-qq"></i>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-500 text-sm">
                <p>© 2025 快推短视频 版权所有</p>
            </div>
        </div>
    </footer>

    <!-- 点数管理模态框 -->
    <div id="pointsModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-xl max-w-md w-full mx-4 overflow-hidden transform transition-all">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold text-gray-900" id="pointsModalTitle">管理点数</h3>
                    <button onclick="closePointsModal()" class="text-gray-400 hover:text-gray-500">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
                
                <div class="mb-4">
                    <p class="text-sm text-gray-600">当前用户: <span id="pointsModalUsername" class="font-medium">用户名</span></p>
                    <p class="text-sm text-gray-600">当前点数: <span id="pointsModalCurrentPoints" class="font-medium">0</span></p>
                </div>
                
                <div class="mb-6">
                    <label for="pointsAmount" class="block text-sm font-medium text-gray-700 mb-1">点数变动</label>
                    <div class="flex">
                        <button id="decreasePoints" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-l-lg transition-colors">
                            <i class="fa fa-minus"></i>
                        </button>
                        <input type="number" id="pointsAmount" value="10" min="1" class="w-full border-y border-gray-300 text-center py-2 input-focus">
                        <button id="increasePoints" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-r-lg transition-colors">
                            <i class="fa fa-plus"></i>
                        </button>
                    </div>
                    <p class="mt-2 text-xs text-gray-500">正数表示增加点数，负数表示减少点数</p>
                </div>
                
                <div class="flex justify-end space-x-3">
                    <button onclick="closePointsModal()" class="btn-secondary">取消</button>
                    <button onclick="savePointsChanges()" class="btn-primary">保存</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 用户菜单切换
            const userMenuBtn = document.getElementById('userMenuBtn');
            const userMenu = document.getElementById('userMenu');
            
            userMenuBtn.addEventListener('click', function(e) {
                e.preventDefault();
                userMenu.classList.toggle('hidden');
            });
            
            // 移动端菜单切换
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileMenu = document.getElementById('mobileMenu');
            
            mobileMenuBtn.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
            });
            
            // 点击其他区域关闭菜单
            document.addEventListener('click', function(e) {
                if (!userMenuBtn.contains(e.target) && !userMenu.contains(e.target)) {
                    userMenu.classList.add('hidden');
                }
                
                if (!mobileMenuBtn.contains(e.target) && !mobileMenu.contains(e.target) && !mobileMenu.classList.contains('hidden')) {
                    mobileMenu.classList.add('hidden');
                }
            });
            
            // 退出登录
            document.getElementById('logoutLink').addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('user');
                window.location.href = 'login.html';
            });
            
            // 点数增减按钮
            document.getElementById('decreasePoints').addEventListener('click', function() {
                const pointsInput = document.getElementById('pointsAmount');
                let value = parseInt(pointsInput.value);
                if (value > 1) {
                    pointsInput.value = value - 1;
                }
            });
            
            document.getElementById('increasePoints').addEventListener('click', function() {
                const pointsInput = document.getElementById('pointsAmount');
                let value = parseInt(pointsInput.value);
                pointsInput.value = value + 1;
            });
        });
        
        // 打开点数管理模态框
        function openPointsModal(username) {
            const pointsModal = document.getElementById('pointsModal');
            const pointsModalTitle = document.getElementById('pointsModalTitle');
            const pointsModalUsername = document.getElementById('pointsModalUsername');
            const pointsModalCurrentPoints = document.getElementById('pointsModalCurrentPoints');
            
            pointsModalTitle.textContent = '管理点数';
            pointsModalUsername.textContent = username;
            pointsModalCurrentPoints.textContent = document.getElementById(username + 'Points').textContent;
            
            // 存储当前操作的用户名
            pointsModal.dataset.username = username;
            
            pointsModal.classList.remove('hidden');
        }
        
        // 关闭点数管理模态框
        function closePointsModal() {
            document.getElementById('pointsModal').classList.add('hidden');
        }
        
        // 保存点数变更
        function savePointsChanges() {
            const pointsModal = document.getElementById('pointsModal');
            const username = pointsModal.dataset.username;
            const pointsAmount = parseInt(document.getElementById('pointsAmount').value);
            const currentPointsElement = document.getElementById(username + 'Points');
            const currentPoints = parseInt(currentPointsElement.textContent);
            
            // 更新点数
            const newPoints = currentPoints + pointsAmount;
            currentPointsElement.textContent = newPoints;
            
            // 显示成功提示（这里应该是调用GitHub API创建issue）
            alert(`已成功为用户 ${username} ${pointsAmount > 0 ? '增加' : '减少'} ${Math.abs(pointsAmount)} 点推推点数！`);
            
            // 关闭模态框
            closePointsModal();
            
            // 模拟创建GitHub issue
            createIssue(username, `调整推推点数: ${pointsAmount > 0 ? '+' : ''}${pointsAmount}`, 
                `管理员为用户 ${username} ${pointsAmount > 0 ? '增加' : '减少'}了 ${Math.abs(pointsAmount)} 点推推点数。\n当前点数: ${newPoints}`);
        }
        
        // 查看用户详情
        function viewUserDetails(username) {
            alert(`查看用户 ${username} 的详细信息（这里应该跳转到用户详情页）`);
        }
        
        // 回复消息
        function replyMessage(username, messageId) {
            const message = prompt(`回复 ${username}:`, '');
            if (message) {
                alert(`已回复 ${username} 的消息（这里应该调用GitHub API创建issue）`);
                
                // 模拟创建GitHub issue
                createIssue(username, `回复消息 #${messageId}`, `管理员回复: ${message}`);
            }
        }
        
        // 模拟创建GitHub issue
        function createIssue(username, title, body) {
            console.log(`创建GitHub issue: ${title}`);
            console.log(`用户: ${username}`);
            console.log(`内容: ${body}`);
            
            // 这里应该是实际调用GitHub API的代码
            // 为了演示，我们只在控制台输出信息
        }
    </script>
</body>
</html>
