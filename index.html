<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨ç†æŒ‘æˆ˜ - å®Œæ•´å¤šæœŸç‰ˆ</title>
    <style>
        * {
            --primary-color: #1a73e8;
            --secondary-color: #ff4444;
            --success-color: #2ecc71;
            --border-radius: 15px;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Segoe UI", sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .header {
            color: var(--primary-color);
            font-size: 2.8rem;
            margin: 30px 0;
            text-shadow: 0 4px 12px rgba(26, 115, 232, 0.15);
        }

        .season-selector {
            margin-bottom: 30px;
            display: flex;
            gap: 15px;
        }

        .season-btn {
            padding: 10px 25px;
            background: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .season-btn.active {
            background: var(--primary-color);
            color: white;
            transform: scale(1.05);
        }

        .season-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .level-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 30px;
            width: 100%;
            max-width: 1000px;
        }

        .level-btn {
            width: 150px;
            height: 150px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .level-btn.locked {
            background: #f5f5f5;
            cursor: not-allowed;
            pointer-events: none;
            opacity: 0.6;
        }

        .level-btn.unlocked {
            color: var(--primary-color);
        }

        .level-btn.current {
            background: var(--primary-color);
            color: white;
            transform: scale(1.05);
        }

        .level-btn.completed::after {
            content: "âœ…";
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2rem;
            color: var(--success-color);
        }

        .level-number {
            font-size: 3rem;
            font-weight: bold;
        }

        .question-section {
            display: none;
            width: 100%;
            max-width: 900px;
            background: white;
            padding: 35px;
            border-radius: var(--border-radius);
            box-shadow: 0 12px 36px rgba(0, 0, 0, 0.1);
            margin-top: 30px;
            line-height: 1.6;
        }

        .question-group {
            margin-bottom: 30px;
        }

        .question-title {
            font-size: 1.4rem;
            color: #333;
            margin-bottom: 15px;
        }

        .option {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
            color: #5f6368;
            cursor: pointer;
            padding: 12px 20px;
            border-radius: 10px;
            transition: background-color 0.3s ease;
        }

        .option:hover {
            background: #f0f5fa;
        }

        input[type="radio"] {
            appearance: none;
            width: 24px;
            height: 24px;
            border: 2px solid var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        input[type="radio"]:checked {
            background: var(--primary-color);
        }

        input[type="radio"]::after {
            content: "";
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: white;
            display: none;
        }

        input[type="radio"]:checked::after {
            display: block;
        }

        .button-group {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 40px;
        }

        .back-btn,
        .submit-btn {
            padding: 14px 40px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1.2rem;
            cursor: pointer;
            transition: transform 0.3s ease;
            min-width: 180px;
        }

        .back-btn {
            background: var(--secondary-color);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.15);
        }

        .submit-btn {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 4px 15px rgba(26, 115, 232, 0.2);
        }

        .back-btn:hover,
        .submit-btn:hover {
            transform: scale(1.05);
        }

        .help-tooltip {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            padding: 10px 18px;
            border-radius: 25px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: opacity 0.3s ease;
        }

        .help-tooltip:hover {
            opacity: 0.9;
        }

        .progress-info {
            color: #555;
            margin-bottom: 20px;
        }

        /* å¼¹çª—æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            text-align: center;
            max-width: 600px;
        }

        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 600px) {
            .level-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .level-btn {
                width: 100%;
                height: 80px;
                flex-direction: row;
                justify-content: flex-start;
                padding-left: 20px;
            }

            .level-number {
                font-size: 1.8rem;
                margin-right: 15px;
            }
        }
    </style>
</head>

<body>
    <h1 class="header">æ¨ç†æŒ‘æˆ˜</h1>

    <div class="season-selector" id="seasonSelector"></div>
    <div class="progress-info" id="progressInfo"></div>
    <div class="level-container" id="levelContainer"></div>

    <div class="question-section" id="questionSection">
        <div id="questionContent"></div>
        <div class="button-group">
            <button class="back-btn" onclick="goBack()">è¿”å›å…³å¡</button>
            <button class="submit-btn" onclick="checkAnswers()">æäº¤ç­”æ¡ˆ</button>
        </div>
    </div>

    <div class="help-tooltip" onclick="showHelp()">?</div>

    <div class="modal" id="resultModal">
        <div class="modal-content">
            <h2 id="modalTitle"></h2>
            <div id="modalAnswers"></div>
            <button onclick="closeModal()">å…³é—­</button>
        </div>
    </div>

    <script>
        // å®Œæ•´æ¸¸æˆæ•°æ®ï¼ˆä¸‰æœŸï¼Œæ¯æœŸ5å…³ï¼Œæ¯å…³3é¢˜ï¼‰
        const gameData = {
            currentSeason: 1,
            currentLevel: 1,
            seasons: [
                {
                    title: "ç¬¬ä¸€æœŸï¼šåŸºç¡€æŒ‘æˆ˜",
                    levels: [
                        {
                            title: "é€»è¾‘å…¥é—¨",
                            questions: [
                                {
                                    q: "å¦‚æœæ‰€æœ‰çš„é¸Ÿéƒ½ä¼šé£ï¼Œä¼é¹…æ˜¯é¸Ÿï¼Œé‚£ä¹ˆä¼é¹…ä¼šé£å—ï¼Ÿ",
                                    options: ["A. ä¼š", "B. ä¸ä¼š", "C. å¯èƒ½", "D. è§†æƒ…å†µè€Œå®š"],
                                    answer: "B"
                                },
                                {
                                    q: "å“ªä¸ªå›¾å½¢ä¸ä¼—ä¸åŒï¼Ÿâ–³ â—‹ â–¡ â–³",
                                    options: ["A. â–³", "B. â—‹", "C. â–¡", "D. æœ€åä¸€ä¸ªâ–³"],
                                    answer: "B"
                                },
                                {
                                    q: "1+1åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¸ç­‰äº2ï¼Ÿ",
                                    options: ["A. ç®—é”™æ—¶", "B. äºŒè¿›åˆ¶", "C. å•ä½ä¸åŒ", "D. æ‰€æœ‰æƒ…å†µ"],
                                    answer: "B"
                                }
                            ]
                        },
                        {
                            title: "ç”Ÿæ´»æ™ºæ…§",
                            questions: [
                                {
                                    q: "ä»€ä¹ˆäººä»æ¥ä¸å»åŒ»é™¢ï¼Ÿ",
                                    options: ["A. åŒ»ç”Ÿ", "B. æ­»äºº", "C. å¥åº·äºº", "D. å¤–æ˜Ÿäºº"],
                                    answer: "B"
                                },
                                {
                                    q: "ä»€ä¹ˆå­—æ¨ªç«–éƒ½èƒ½è¯»ï¼Ÿ",
                                    options: ["A. ä¸€", "B. å", "C. å£", "D. ç”°"],
                                    answer: "B"
                                },
                                {
                                    q: "ä»€ä¹ˆè½¦ä¸éœ€è¦ç‡ƒæ–™ï¼Ÿ",
                                    options: ["A. è‡ªè¡Œè½¦", "B. ç”µè½¦", "C. å¤ªé˜³èƒ½è½¦", "D. ç©å…·è½¦"],
                                    answer: "A"
                                }
                            ]
                        },
                        {
                            title: "æ•°å­—è°œé¢˜",
                            questions: [
                                {
                                    q: "3äºº3å¤©å–3æ¡¶æ°´ï¼Œ9äºº9å¤©å–å‡ æ¡¶ï¼Ÿ",
                                    options: ["A. 9", "B. 18", "C. 27", "D. 81"],
                                    answer: "C"
                                },
                                {
                                    q: "ä¸‹ä¸€ä¸ªæ•°å­—æ˜¯ï¼Ÿ2, 3, 5, 8, 13",
                                    options: ["A. 18", "B. 20", "C. 21", "D. 24"],
                                    answer: "C"
                                },
                                {
                                    q: "1=5, 2=15, 3=215, 4=3215, 5=?",
                                    options: ["A. 43215", "B. 1", "C. 5215", "D. 53215"],
                                    answer: "B"
                                }
                            ]
                        },
                        {
                            title: "æ–‡å­—æ¸¸æˆ",
                            questions: [
                                {
                                    q: "ä»€ä¹ˆå­—äººäººéƒ½ä¼šå¿µé”™ï¼Ÿ",
                                    options: ["A. é”™", "B. å¯¹", "C. çœŸ", "D. å‡"],
                                    answer: "A"
                                },
                                {
                                    q: "ä»€ä¹ˆä¹¦ä¸èƒ½çœ‹ï¼Ÿ",
                                    options: ["A. å¤©ä¹¦", "B. ç›²æ–‡ä¹¦", "C. é—å˜±", "D. æ— å­—ä¹¦"],
                                    answer: "C"
                                },
                                {
                                    q: "ä»€ä¹ˆç‰›ä¸åƒè‰ï¼Ÿ",
                                    options: ["A. èœ—ç‰›", "B. é“ç‰›", "C. å¤©ç‰›", "D. å¥¶ç‰›"],
                                    answer: "A"
                                }
                            ]
                        },
                        {
                            title: "ç»ˆææŒ‘æˆ˜",
                            questions: [
                                {
                                    q: "å°åèƒ½åœ¨é›¨ä¸­ç«™åŠå°æ—¶å…¨èº«æ¹¿é€å´ä¸æ„Ÿå†’ï¼Œä¸ºä»€ä¹ˆï¼Ÿ",
                                    options: ["A. åœ¨æµ´å®¤", "B. æ˜¯æœºå™¨äºº", "C. ç©¿ç€é›¨è¡£", "D. ä½“è´¨ç‰¹æ®Š"],
                                    answer: "A"
                                },
                                {
                                    q: "ä»€ä¹ˆæ¯”èµ›è¦é€€ç€è¿›è¡Œï¼Ÿ",
                                    options: ["A. æ‹”æ²³", "B. èµ›è·‘", "C. æ¸¸æ³³", "D. è·³è¿œ"],
                                    answer: "A"
                                },
                                {
                                    q: "ä»€ä¹ˆé—¨æ°¸è¿œå…³ä¸ä¸Šï¼Ÿ",
                                    options: ["A. çƒé—¨", "B. å¿ƒé—¨", "C. ç”µæ¢¯é—¨", "D. å†°ç®±é—¨"],
                                    answer: "A"
                                }
                            ]
                        }
                    ]
                },
                {
                    title: "ç¬¬äºŒæœŸï¼šè¿›é˜¶æŒ‘æˆ˜",
                    levels: [
                        {
                            title: "é€»è¾‘è¿›é˜¶",
                            questions: [
                                {
                                    q: "å¦‚æœæ‰€æœ‰Aéƒ½æ˜¯Bï¼Œæœ‰äº›Bæ˜¯Cï¼Œé‚£ä¹ˆï¼š",
                                    options: ["A. æœ‰äº›Aæ˜¯C", "B. æ‰€æœ‰Aæ˜¯C", "C. æ— æ³•ç¡®å®š", "D. æ²¡æœ‰Aæ˜¯C"],
                                    answer: "C"
                                },
                                {
                                    q: "ç”²ä¹™ä¸™ä¸è°æ˜¯å°å·ï¼Ÿ(åªæœ‰1äººè¯´çœŸè¯)\nç”²ï¼šä¸æ˜¯æˆ‘\nä¹™ï¼šæ˜¯ä¸™\nä¸™ï¼šæ˜¯ä¹™\nä¸ï¼šä¸æ˜¯æˆ‘",
                                    options: ["A. ç”²", "B. ä¹™", "C. ä¸™", "D. ä¸"],
                                    answer: "A"
                                },
                                {
                                    q: "ä¸‹ä¸€ä¸ªå›¾å½¢æ˜¯ï¼Ÿâ–¡ â—‹ â–³ â–¡ â—‹",
                                    options: ["A. â–³", "B. â–¡", "C. â—‹", "D. â˜†"],
                                    answer: "A"
                                }
                            ]
                        },
                        {
                            title: "ç©ºé—´æƒ³è±¡",
                            questions: [
                                {
                                    q: "ç«‹æ–¹ä½“å±•å¼€å›¾å“ªä¸ªä¸èƒ½ç»„æˆæ­£æ–¹ä½“ï¼Ÿ",
                                    options: ["A. ç”°å­—å½¢", "B. æ¥¼æ¢¯å½¢", "C. Lå­—å½¢", "D. Tå­—å½¢"],
                                    answer: "D"
                                },
                                {
                                    q: "æœ€å°‘éœ€è¦å‡ æ ¹ç«æŸ´æ‘†3ä¸ªä¸‰è§’å½¢ï¼Ÿ",
                                    options: ["A. 6", "B. 7", "C. 9", "D. 12"],
                                    answer: "A"
                                },
                                {
                                    q: "é•œå­é‡Œçš„ç”µå­é’Ÿæ˜¾ç¤º15:20ï¼Œå®é™…æ—¶é—´æ˜¯ï¼Ÿ",
                                    options: ["A. 15:20", "B. 20:15", "C. 21:50", "D. 12:50"],
                                    answer: "C"
                                }
                            ]
                        },
                        {
                            title: "æ•°å­¦æ€ç»´",
                            questions: [
                                {
                                    q: "3ä¸ªè‹¹æœåˆ†ç»™5äººï¼Œè‡³å°‘è¦åˆ‡å‡ åˆ€ï¼Ÿ",
                                    options: ["A. 3", "B. 4", "C. 5", "D. 6"],
                                    answer: "B"
                                },
                                {
                                    q: "æ—¶é’ˆåˆ†é’ˆä¸€æ˜¼å¤œé‡åˆå‡ æ¬¡ï¼Ÿ",
                                    options: ["A. 22", "B. 23", "C. 24", "D. 25"],
                                    answer: "A"
                                },
                                {
                                    q: "100!æœ«å°¾æœ‰å‡ ä¸ª0ï¼Ÿ",
                                    options: ["A. 20", "B. 24", "C. 21", "D. 25"],
                                    answer: "B"
                                }
                            ]
                        },
                        {
                            title: "ç”Ÿæ´»è§‚å¯Ÿ",
                            questions: [
                                {
                                    q: "ä»€ä¹ˆåŒ»é™¢ä¸æ²»ç—…ï¼Ÿ",
                                    options: ["A. å® ç‰©åŒ»é™¢", "B. æ‰‹æœºåŒ»é™¢", "C. æ¤ç‰©åŒ»é™¢", "D. å¿ƒç†åŒ»é™¢"],
                                    answer: "B"
                                },
                                {
                                    q: "ä»€ä¹ˆç…§ç‰‡çœ‹ä¸å‡ºäººï¼Ÿ",
                                    options: ["A. Xå…‰ç‰‡", "B. èƒŒå½±ç…§", "C. å©´å„¿ç…§", "D. è¯ä»¶ç…§"],
                                    answer: "A"
                                },
                                {
                                    q: "ä»€ä¹ˆè›‹ä¸èƒ½åƒï¼Ÿ",
                                    options: ["A. ç¬¨è›‹", "B. é¸¡è›‹", "C. é¸­è›‹", "D. é¹…è›‹"],
                                    answer: "A"
                                }
                            ]
                        },
                        {
                            title: "ç»ˆææŒ‘æˆ˜",
                            questions: [
                                {
                                    q: "å°æ˜çŸ¥é“ç­”æ¡ˆå´æ€»ç­”é”™ï¼Œä¸ºä»€ä¹ˆï¼Ÿ",
                                    options: ["A. æ–‡ç›²", "B. è€ƒå·å°é”™", "C. è¢«å¨èƒ", "D. åœ¨æ”¹é”™é¢˜"],
                                    answer: "D"
                                },
                                {
                                    q: "ä»€ä¹ˆæ¯”èµ›èµ¢çš„å¾—ä¸åˆ°ï¼Œè¾“çš„æ‰æœ‰ï¼Ÿ",
                                    options: ["A. åˆ’æ‹³", "B. çŒœæ‹³", "C. æ‹”æ²³", "D. ä¸‹æ£‹"],
                                    answer: "C"
                                },
                                {
                                    q: "æ€æ ·è®©10+10=100ï¼Ÿ",
                                    options: ["A. ç®—é”™", "B. äºŒè¿›åˆ¶", "C. å•ä½ç±³+å˜ç±³", "D. é•œå­åå°„"],
                                    answer: "B"
                                }
                            ]
                        }
                    ]
                },
                {
                    title: "ç¬¬ä¸‰æœŸï¼šå¤§å¸ˆè¯•ç‚¼",
                    levels: [
                        {
                            title: "é€»è¾‘å¤§å¸ˆ",
                            questions: [
                                {
                                    q: "ç”²è¯´ä¹™è¯´è°ï¼Œä¹™è¯´ä¸™è¯´è°ï¼Œä¸™è¯´ç”²ä¹™éƒ½è¯´è°ï¼Œè°è¯´è°ï¼Ÿ",
                                    options: ["A. ç”²", "B. ä¹™", "C. ä¸™", "D. å…¨éƒ¨"],
                                    answer: "C"
                                },
                                {
                                    q: "Aï¼Bï¼ŒBï¼Cï¼ŒCï¼Aå¯èƒ½å—ï¼Ÿ",
                                    options: ["A. ä¸å¯èƒ½", "B. å¾ªç¯å®šä¹‰", "C. ä¸åŒæ ‡å‡†", "D. å¯èƒ½"],
                                    answer: "C"
                                },
                                {
                                    q: "ä¸‹ä¸€ä¸ªå­—æ¯æ˜¯ï¼ŸO, T, T, F, F",
                                    options: ["A. S", "B. S", "C. E", "D. N"],
                                    answer: "A"
                                }
                            ]
                        },
                        {
                            title: "ç©ºé—´å¤§å¸ˆ",
                            questions: [
                                {
                                    q: "ç«‹æ–¹ä½“ä¸‰ä¸ªç›¸é‚»é¢ä¸­å¿ƒè¿çº¿å½¢æˆçš„ä¸‰è§’å½¢æ˜¯ï¼Ÿ",
                                    options: ["A. ç­‰è¾¹", "B. ç­‰è…°", "C. ç›´è§’", "D. ä¸è§„åˆ™"],
                                    answer: "A"
                                },
                                {
                                    q: "å°†æ­£æ–¹å½¢æ²¿å¯¹è§’çº¿æŠ˜å åæœ‰å‡ ä¸ªç›´è§’ï¼Ÿ",
                                    options: ["A. 2", "B. 4", "C. 6", "D. 8"],
                                    answer: "B"
                                },
                                {
                                    q: "æ­£æ–¹ä½“åˆ‡å»ä¸€ä¸ªè§’è¿˜å‰©å‡ ä¸ªè§’ï¼Ÿ",
                                    options: ["A. 7", "B. 10", "C. 12", "D. 14"],
                                    answer: "B"
                                }
                            ]
                        },
                        {
                            title: "æ•°å­¦å¤§å¸ˆ",
                            questions: [
                                {
                                    q: "1~100å»æ‰æ‰€æœ‰å«4çš„æ•°è¿˜å‰©å‡ ä¸ªï¼Ÿ",
                                    options: ["A. 72", "B. 80", "C. 81", "D. 90"],
                                    answer: "C"
                                },
                                {
                                    q: "3ä¸ªäºº3é¡¶å¸½å­ï¼Œè‡³å°‘1äººæ‹¿åˆ°è‡ªå·±å¸½å­çš„æ¦‚ç‡æ˜¯ï¼Ÿ",
                                    options: ["A. 1/3", "B. 1/2", "C. 2/3", "D. 5/6"],
                                    answer: "C"
                                },
                                {
                                    q: "1å…ƒä¹°3ä¸ªæ¡ƒï¼Œ3ä¸ªæ ¸æ¢1ä¸ªæ¡ƒï¼Œ10å…ƒæœ€å¤šåƒå‡ ä¸ªï¼Ÿ",
                                    options: ["A. 40", "B. 44", "C. 45", "D. 50"],
                                    answer: "C"
                                }
                            ]
                        },
                        {
                            title: "è§‚å¯Ÿå¤§å¸ˆ",
                            questions: [
                                {
                                    q: "ä¸‹å›¾ä¸­æœ‰å‡ ä¸ªä¸‰è§’å½¢ï¼Ÿï¼ˆæ¨¡æ‹Ÿé¢˜ï¼‰",
                                    options: ["A. 5", "B. 8", "C. 10", "D. 12"],
                                    answer: "C"
                                },
                                {
                                    q: "å“ªä¸ªæœˆæœ‰28å¤©ï¼Ÿ",
                                    options: ["A. 2æœˆ", "B. é—°å¹´2æœˆ", "C. æ¯ä¸ªæœˆ", "D. æ²¡æœ‰"],
                                    answer: "C"
                                },
                                {
                                    q: "ä»€ä¹ˆåŠ¨ç‰©å¤©å¤©ç†¬å¤œï¼Ÿ",
                                    options: ["A. çŒ«å¤´é¹°", "B. ç†ŠçŒ«", "C. è™è ", "D. æ²¡æœ‰"],
                                    answer: "B"
                                }
                            ]
                        },
                        {
                            title: "ç»ˆæè¯•ç‚¼",
                            questions: [
                                {
                                    q: "å°å¼ å¼€è½¦è§çº¢ç¯ä¸åœå´åˆæ³•ï¼Œä¸ºä»€ä¹ˆï¼Ÿ",
                                    options: ["A. è‰²ç›²", "B. å¼€ç«è½¦", "C. è­¦è½¦", "D. æ²¡å¼€è½¦"],
                                    answer: "B"
                                },
                                {
                                    q: "æ€æ ·ç”¨çº¢è“é“…ç¬”å†™å‡ºé»‘å­—ï¼Ÿ",
                                    options: ["A. ä¸å¯èƒ½", "B. å†™'é»‘'å­—", "C. æ··åˆé¢œè‰²", "D. åˆ»å­—"],
                                    answer: "B"
                                },
                                {
                                    q: "ä»€ä¹ˆæ± ä¸èƒ½è£…æ°´ï¼Ÿ",
                                    options: ["A. ç”µæ± ", "B. æ³³æ± ", "C. æµ´æ± ", "D. æ± å¡˜"],
                                    answer: "A"
                                }
                            ]
                        }
                    ]
                }
            ],
            unlockedLevels: {
                1: 1,
                2: 0,
                3: 0
            }
        };

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            try {
                const savedData = localStorage.getItem("æ¨ç†æ¸¸æˆè¿›åº¦");
                if (savedData) {
                    const progress = JSON.parse(savedData);
                    gameData.currentSeason = progress.currentSeason || 1;
                    gameData.unlockedLevels = progress.unlockedLevels || { 1: 1, 2: 0, 3: 0 };
                }
                renderSeasonSelector();
                updateProgress();
                renderLevels();
            } catch (error) {
                console.error("åˆå§‹åŒ–é”™è¯¯:", error);
                localStorage.removeItem("æ¨ç†æ¸¸æˆè¿›åº¦");
                gameData.unlockedLevels = { 1: 1, 2: 0, 3: 0 };
            }
        }

        // æ¸²æŸ“å­£é€‰æ‹©å™¨
        function renderSeasonSelector() {
            const container = document.getElementById("seasonSelector");
            container.innerHTML = "";

            gameData.seasons.forEach((season, index) => {
                const btn = document.createElement("button");
                btn.className = `season-btn ${index + 1 === gameData.currentSeason ? 'active' : ''}`;
                btn.textContent = season.title;

                // åˆ¤æ–­èµ›å­£æ˜¯å¦è§£é”
                if (index > 0 && gameData.unlockedLevels[index] < gameData.seasons[index - 1].levels.length) {
                    btn.disabled = true;
                    btn.title = "éœ€è¦å…ˆå®Œæˆå‰ä¸€å­£";
                }

                btn.onclick = () => {
                    gameData.currentSeason = index + 1;
                    renderSeasonSelector();
                    updateProgress();
                    renderLevels();
                };
                container.appendChild(btn);
            });
        }

        // å®Œæ•´æ¸²æŸ“å…³å¡é€»è¾‘
        function renderLevels() {
            const container = document.getElementById("levelContainer");
            container.innerHTML = "";

            const season = gameData.seasons[gameData.currentSeason - 1];
            const seasonProgress = gameData.unlockedLevels[gameData.currentSeason];

            season.levels.forEach((level, index) => {
                const btn = document.createElement("div");
                let status = "locked";

                if (index < seasonProgress) {
                    status = "completed";
                } else if (index === seasonProgress) {
                    status = "current";
                }

                btn.className = `level-btn ${status}`;
                btn.innerHTML = `
                    <div class="level-number">${index + 1}</div>
                    <div class="level-status">${level.title}</div>
                `;

                if (status !== "locked") {
                    btn.onclick = () => {
                        gameData.currentLevel = index + 1;
                        showQuestions();
                    };
                }

                container.appendChild(btn);
            });
        }

        // æ˜¾ç¤ºé¢˜ç›®å®Œæ•´é€»è¾‘
        function showQuestions() {
            const season = gameData.seasons[gameData.currentSeason - 1];
            const level = season.levels[gameData.currentLevel - 1];

            document.getElementById("questionContent").innerHTML = `
                <h3>${season.title} - ${level.title}</h3>
                ${level.questions.map((q, i) => `
                    <div class="question-group">
                        <div class="question-title">${i + 1}. ${q.q}</div>
                        <div class="option-group">
                            ${q.options.map(opt => `
                                <div class="option">
                                    <input type="radio" name="q${i}" value="${opt.charAt(0)}">
                                    <label>${opt}</label>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `).join('')}
            `;

            document.getElementById("questionSection").style.display = "block";
            document.getElementById("levelContainer").style.display = "none";
        }

        // å®Œæ•´ç­”æ¡ˆæ£€æŸ¥é€»è¾‘
        function checkAnswers() {
            const season = gameData.seasons[gameData.currentSeason - 1];
            const level = season.levels[gameData.currentLevel - 1];
            let allCorrect = true;
            const results = [];

            level.questions.forEach((q, i) => {
                const selected = document.querySelector(`input[name="q${i}"]:checked`);
                const isCorrect = selected && selected.value === q.answer;
                results.push({ isCorrect, question: q, selected: selected?.value });
                if (!isCorrect) {
                    allCorrect = false;
                }
            });

            showResultModal(allCorrect, results);

            if (allCorrect) {
                const seasonProgress = gameData.unlockedLevels[gameData.currentSeason];

                // æ›´æ–°å½“å‰å…³å¡è¿›åº¦
                if (gameData.currentLevel === seasonProgress) {
                    gameData.unlockedLevels[gameData.currentSeason]++;

                    // åˆ¤æ–­æ˜¯å¦å®Œæˆæœ¬å­£
                    if (gameData.unlockedLevels[gameData.currentSeason] > season.levels.length) {
                        if (gameData.currentSeason < gameData.seasons.length) {
                            gameData.unlockedLevels[gameData.currentSeason + 1] = 1;
                        }
                        showResultModal(true, results, "ğŸ‰ æ­å–œå®Œæˆæœ¬å­£æ‰€æœ‰æŒ‘æˆ˜ï¼");
                    }
                }

                // ä¿å­˜è¿›åº¦
                localStorage.setItem("æ¨ç†æ¸¸æˆè¿›åº¦", JSON.stringify({
                    currentSeason: gameData.currentSeason,
                    unlockedLevels: gameData.unlockedLevels
                }));

                renderLevels();
                updateProgress();
                goBack();
            }
        }

        // æ˜¾ç¤ºç»“æœå¼¹çª—
        function showResultModal(isCorrect, results, message = "") {
            const modal = document.getElementById("resultModal");
            modal.style.display = "flex";

            const title = isCorrect ? "ğŸ‰ å›ç­”æ­£ç¡®ï¼" : "âŒ éƒ¨åˆ†ç­”æ¡ˆé”™è¯¯";
            document.getElementById("modalTitle").textContent = title;

            const answersHtml = results.map((result, i) => `
                <div class="result-item ${result.isCorrect ? 'correct' : 'incorrect'}">
                    <span>${i + 1}. ${result.question.q}</span>
                    <span>ä½ çš„ç­”æ¡ˆï¼š${result.selected || "æœªé€‰æ‹©"}</span>
                    <span>æ­£ç¡®ç­”æ¡ˆï¼š${result.question.answer}</span>
                </div>
            `).join('');

            document.getElementById("modalAnswers").innerHTML = answersHtml + (message ? `<p>${message}</p>` : '');
        }

        // å…³é—­ç»“æœå¼¹çª—
        function closeModal() {
            document.getElementById("resultModal").style.display = "none";
        }

        // å…¶ä»–è¾…åŠ©å‡½æ•°
        function goBack() {
            document.getElementById("questionSection").style.display = "none";
            document.getElementById("levelContainer").style.display = "grid";
        }

        function updateProgress() {
            const seasonProgress = gameData.unlockedLevels[gameData.currentSeason];
            const info = `å½“å‰è¿›åº¦ï¼šç¬¬${gameData.currentSeason}å­£ - å·²é€šè¿‡${seasonProgress - 1}å…³`;
            document.getElementById("progressInfo").textContent = info;
        }

        function showHelp() {
            alert("ğŸ® æ¸¸æˆæŒ‡å—ï¼š\n1. æ¯å­£5ä¸ªå…³å¡\n2. æ¯ä¸ªå…³å¡éœ€ç­”å¯¹å…¨éƒ¨3é¢˜\n3. å®Œæˆå½“å‰å­£è§£é”ä¸‹ä¸€å­£\n4. è¿›åº¦è‡ªåŠ¨ä¿å­˜\n5. ç‚¹å‡»å¸®åŠ©æŒ‰é’®æŸ¥çœ‹æç¤º");
        }

        // å¯åŠ¨æ¸¸æˆ
        window.onload = initGame;
    </script>
</body>

</html>    
